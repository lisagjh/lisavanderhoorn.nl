<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { SplitText } from "gsap/SplitText";
  import { ScrambleTextPlugin } from "gsap/ScrambleTextPlugin";

  gsap.registerPlugin(ScrollTrigger, SplitText, ScrambleTextPlugin);

  gsap.set(".name-container", {
    position: "relative",
    display: "inline-block",
  });
  gsap.set(".frontend", {
    opacity: 0,
    y: -20,
    position: "absolute",
    top: 0,
    left: 0,
    whiteSpace: "nowrap",
  });

  const tl = gsap.timeline({ delay: 0.25 });

  tl.fromTo(
    ".intro h1 span.greeting",
    { opacity: 0, y: -20 },
    { opacity: 1, y: 0, duration: 1, ease: "power2.inOut" }
  );

  tl.fromTo(
    ".intro h1 span.name",
    { opacity: 0, y: -20 },
    { opacity: 1, y: 0, duration: 1, ease: "power2.inOut" }
  );

  tl.to(
    ".intro h1 span.name",
    {
      opacity: 0,
      y: -20,
      duration: 0.5,
      ease: "power2.inOut",
    },
    "+=3"
  )

    .to(".intro h1 span.frontend", {
      opacity: 1,
      y: 0,
      duration: 0.5,
      ease: "power2.inOut",
    })

    .to(
      ".word",
      {
        duration: 1.5,
        scrambleText: {
          text: "nerd",
          chars: "lowerCase",
          revealDelay: 0.3,
          speed: 0.4,
        },
      },
      "+=2"
    );
</script>

<section class="intro">
  <h1>
    <span class="greeting">Hi! I'm</span>
    <div class="name-container">
      <span class="name">Lisa van der Hoorn</span>
      <span class="frontend"
        >a frontend <span class="word">developer</span></span
      >
    </div>
  </h1>
</section>

<style>
  .intro {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 1rem;
    padding: 8rem 2rem;
    width: 100%;
    max-width: 65rem;
    height: 75vh;
  }

  h1 {
    color: var(--primary);
    line-height: 1;
    display: block;
    overflow: visible;
  }

  h1 {
    font-size: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;

    & span {
      line-height: 1;
    }
  }

  h1 span.name,
  h1 span.frontend {
    font-size: 2.2rem;
  }
</style>
