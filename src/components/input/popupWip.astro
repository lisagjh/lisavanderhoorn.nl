<script>
  const popup = document.querySelector(".popup");
  const closePopupBtn = document.querySelector(".popup-button");
  const aboutSection = document.querySelector(".about");
  let isShown = false; // Track whether the popup has been shown and closed

  const options = {
    root: null, // Use the viewport as the root
    threshold: 0.5, // Trigger when 50% of the section is in view
  };

  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting && !isShown) {
        // Only show the popup if it's not already shown
        // When the section scrolls into view, show the popup
        popup.classList.add("showPopup");
      }
    });
  }, options);

  // Start observing the section
  observer.observe(aboutSection);

  // Close the popup when the button is clicked
  closePopupBtn?.addEventListener("click", function () {
    popup?.classList.remove("showPopup");
    isShown = true; // Mark that the popup has been closed
  });
</script>

<div class="popup" id="wip-popup">
  <div class="popup-content">
    <p>This website is a work in progress. Feel free to look around, or come back later!</p>
    <button class="popup-button">understood :)</button>
  </div>
</div>

<style>
  .popup {
    opacity: 0;
    visibility: hidden;
    position: fixed;
    right: 0;
    bottom: 2rem;
    background-color: var(--white);
    z-index: 10;
    width: 90%;
    max-width: 20rem;
    box-shadow: 0 0 1px 0 var(--dark);
  }

  .popup-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
  }

  .showPopup {
    opacity: 1;
    visibility: visible;
  }
</style>
